<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Etienne G - CAD Portfolio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Dark Mode Styles */
        body.dark-mode {
            background: #1a1a1a;
            color: #e0e0e0;
        }

        body.dark-mode .header {
            background: #0d0d0d;
        }

        body.dark-mode .nav-tabs {
            background: #1f1f1f;
            border-bottom-color: #333;
        }

        body.dark-mode .nav-tab {
            color: #aaa;
        }

        body.dark-mode .nav-tab.active {
            color: #e0e0e0;
        }

        body.dark-mode .content {
            background: #1a1a1a;
        }

        body.dark-mode .gallery-item {
            background: #2a2a2a;
        }

        body.dark-mode .gallery-item:hover {
            box-shadow: 0 8px 24px rgba(255,255,255,0.1);
        }

        body.dark-mode .item-title {
            color: #e0e0e0;
        }

        body.dark-mode .sidebar {
            background: #2a2a2a;
        }

        body.dark-mode .sidebar-title {
            color: #e0e0e0;
        }

        body.dark-mode .tag {
            background: #3a3a3a;
            color: #bbb;
        }

        body.dark-mode .more-content {
            background: #2a2a2a;
        }

        body.dark-mode .more-content p {
            color: #aaa;
        }

        body.dark-mode .sidebar-text {
            color: #aaa;
        }

        /* Dark Mode Toggle */
        .theme-toggle {
            background: #505050;
            border-radius: 6px;
            padding: 3px;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
            margin-left: 15px;
        }

        body.dark-mode .theme-toggle {
            background: #505050;
        }

        .theme-toggle-slider {
            width: 90px;
            height: 28px;
            background: transparent;
            border-radius: 4px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 8px;
        }

        .theme-toggle-text {
            font-size: 11px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.5);
            z-index: 1;
            transition: color 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .theme-toggle-text.light {
            color: rgba(255, 255, 255, 0.5);
        }

        .theme-toggle-text.dark {
            color: rgba(255, 255, 255, 0.5);
        }

        body.dark-mode .theme-toggle-text.dark {
            color: rgba(255, 255, 255, 1);
        }

        body:not(.dark-mode) .theme-toggle-text.light {
            color: rgba(255, 255, 255, 1);
        }

        .theme-toggle-slider::before {
            content: '';
            position: absolute;
            width: 42px;
            height: 22px;
            border-radius: 3px;
            background: #e0e0e0;
            top: 3px;
            left: 3px;
            transition: transform 0.3s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }

        body.dark-mode .theme-toggle-slider::before {
            transform: translateX(45px);
        }

        /* Language Toggle */
        .language-toggle {
            background: #2196F3;
            border-radius: 6px;
            padding: 3px;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
            margin-left: 15px;
        }

        .language-toggle-slider {
            width: 90px;
            height: 28px;
            background: transparent;
            border-radius: 4px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 8px;
        }

        .language-toggle-text {
            font-size: 11px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.5);
            z-index: 1;
            transition: color 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .language-toggle-text.en {
            color: rgba(255, 255, 255, 0.5);
        }

        .language-toggle-text.fr {
            color: rgba(255, 255, 255, 0.5);
        }

        body.lang-fr .language-toggle-text.fr {
            color: rgba(255, 255, 255, 1);
        }

        body:not(.lang-fr) .language-toggle-text.en {
            color: rgba(255, 255, 255, 1);
        }

        .language-toggle-slider::before {
            content: '';
            position: absolute;
            width: 42px;
            height: 22px;
            border-radius: 3px;
            background: #e0e0e0;
            top: 3px;
            left: 3px;
            transition: transform 0.3s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }

        body.lang-fr .language-toggle-slider::before {
            transform: translateX(45px);
        }

        /* Header/Profile Section */
        .header {
            background: #2c2c2c;
            color: white;
            padding: 40px 20px;
        }

        .profile-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .profile-pic {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: #4a4a4a;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: #888;
        }

        .profile-info h1 {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .profile-actions {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-top: 15px;
        }

        .hire-button {
            background: #4caf50;
            color: white;
            border: none;
            padding: 10px 24px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            transition: background 0.3s ease, transform 0.2s ease;
        }

        .hire-button:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        .location {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            color: #aaa;
        }

        .location-icon {
            font-size: 20px;
        }

        .profile-stats {
            display: flex;
            gap: 30px;
            margin-top: 15px;
        }

        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-number {
            font-size: 20px;
            font-weight: bold;
        }

        .stat-label {
            font-size: 13px;
            color: #aaa;
        }

        /* Navigation Tabs */
        .nav-tabs {
            background: white;
            border-bottom: 1px solid #ddd;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            gap: 40px;
            padding: 0 20px;
            align-items: center;
        }

        .nav-tab {
            padding: 20px 0;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-weight: 500;
            color: #666;
        }

        .nav-tab.active {
            color: #333;
            border-bottom-color: #ff4757;
        }

        /* Models Section */
        .content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
        }

        .view-all {
            color: #007bff;
            text-decoration: none;
            font-size: 14px;
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .more-content {
            background: white;
            padding: 40px;
            border-radius: 8px;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .more-content h2 {
            margin-bottom: 20px;
            font-size: 28px;
        }

        .more-content p {
            margin-bottom: 15px;
            font-size: 16px;
            color: #555;
        }

        /* Gallery Grid */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .gallery-item {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .gallery-item:hover {
            transform: scale(1.2);
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
            z-index: 10;
        }

        .gallery-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: #3a3a3a;
            display: block;
        }

        .item-info {
            padding: 12px;
        }

        .item-title {
            font-size: 14px;
            font-weight: 500;
            color: #333;
        }

        .item-stats {
            display: flex;
            gap: 15px;
            margin-top: 8px;
            font-size: 12px;
            color: #666;
        }

        .item-stat {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Sidebar */
        .sidebar {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .sidebar-section {
            margin-bottom: 30px;
        }

        .sidebar-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .sidebar-text {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tag {
            background: #f0f0f0;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 13px;
            color: #555;
        }

        @media (min-width: 1024px) {
            .content {
                display: grid;
                grid-template-columns: 1fr 300px;
                gap: 30px;
            }
        }

        @media (max-width: 768px) {
            .profile-container {
                flex-direction: column;
                text-align: center;
            }

            .profile-info h1 {
                font-size: 28px;
            }

            .gallery {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }

            .gallery-item:hover {
                transform: scale(1.15);
            }
        }
    </style>
</head>
<body>
    <!-- Header/Profile Section -->
    <div class="header">
        <div class="profile-container">
            <div class="profile-pic">üë§</div>
            <div class="profile-info">
                <h1>Etienne G</h1>
                <div class="profile-actions">
                    <a href="mailto:etienne.g.3d@gmail.com" class="hire-button">
                        ‚úâ <span class="hire-text">Hire me</span>
                    </a>
                    <div class="location">
                        <span class="location-icon">üìç</span>
                        <span>France</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation Tabs -->
    <div class="nav-tabs">
        <div class="nav-container">
            <div class="nav-tab active" data-tab="models"><span class="models-text">Models</span> <span style="color: #999;">18</span></div>
            <div class="nav-tab" data-tab="more"><span class="more-text">More</span></div>
            
            <!-- Dark Mode Toggle -->
            <div class="theme-toggle" id="themeToggle">
                <div class="theme-toggle-slider">
                    <span class="theme-toggle-text light">Light</span>
                    <span class="theme-toggle-text dark">Dark</span>
                </div>
            </div>

            <!-- Language Toggle -->
            <div class="language-toggle" id="languageToggle">
                <div class="language-toggle-slider">
                    <span class="language-toggle-text en">EN</span>
                    <span class="language-toggle-text fr">FR</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="content">
        <div class="main-section">
            <!-- Models Tab Content -->
            <div class="tab-content active" data-content="models">
                <div class="section-header">
                    <h2 class="section-title models-title-text">Models</h2>
                </div>

                <div class="gallery" id="gallery">
                    <!-- Gallery items will be generated by JavaScript -->
                </div>
            </div>

            <!-- More Tab Content -->
            <div class="tab-content" data-content="more">
                <div class="more-content">
                    <h2 class="more-title-text">Additional Information</h2>
                    <p class="more-p1">
                        This portfolio showcases projects completed through comprehensive SOLIDWORKS training courses and personal challenges. Each model demonstrates proficiency in various CAD techniques including lofting, sweeping, sheet metal design, and complex assembly creation.
                    </p>
                    <p class="more-p2">
                        The 3D viewer integrated into this portfolio uses Chili3D, a web-based CAD application that allows for interactive inspection of models directly in your browser. You can rotate, zoom, and examine each design in detail.
                    </p>
                    <p class="more-p3">
                        For collaboration opportunities or project inquiries, please feel free to reach out via email. I am available for freelance work and consulting on mechanical design projects.
                    </p>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-section">
                <h3 class="sidebar-title about-title-text">About</h3>
                <p class="sidebar-text about-text">
                    I am a passionate CAD designer and mechanical engineer specializing in industrial design and 3D modeling. With expertise in SOLIDWORKS, AutoCAD, and various 3D visualization tools, I create precise technical models and assemblies for diverse applications.
                </p>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title specialized-title-text">Specialized in</h3>
                <div class="tags">
                    <span class="tag tag-auto">Automotive</span>
                    <span class="tag tag-fixtures">Fixtures</span>
                    <span class="tag tag-industrial">Industrial design</span>
                    <span class="tag tag-piping">Piping</span>
                </div>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title software-title-text">Software skills</h3>
                <div class="tags">
                    <span class="tag">AutoCAD</span>
                    <span class="tag">SOLIDWORKS</span>
                    <span class="tag">3ds Max</span>
                    <span class="tag">Maya</span>
                    <span class="tag">Blender</span>
                </div>
            </div>
        </aside>
    </div>

    <!-- Load translations from external file -->
    <script src="translations.js"></script>
    
    <script>
        // Translations are now loaded from translations.js
        let currentLanguage = localStorage.getItem('language') || 'en';

        function translatePage() {
            // Update all text elements
            document.querySelector('.hire-text').textContent = translations[currentLanguage]['hire'];
            document.querySelector('.models-text').textContent = translations[currentLanguage]['models'];
            document.querySelector('.more-text').textContent = translations[currentLanguage]['more'];
            document.querySelector('.models-title-text').textContent = translations[currentLanguage]['models-title'];
            document.querySelector('.more-title-text').textContent = translations[currentLanguage]['more-title'];
            document.querySelector('.more-p1').innerHTML = translations[currentLanguage]['more-p1'];
            document.querySelector('.more-p2').innerHTML = translations[currentLanguage]['more-p2'];
            document.querySelector('.more-p3').innerHTML = translations[currentLanguage]['more-p3'];
            document.querySelector('.about-title-text').textContent = translations[currentLanguage]['about-title'];
            document.querySelector('.about-text').textContent = translations[currentLanguage]['about-text'];
            document.querySelector('.specialized-title-text').textContent = translations[currentLanguage]['specialized-title'];
            document.querySelector('.tag-auto').textContent = translations[currentLanguage]['tag-auto'];
            document.querySelector('.tag-fixtures').textContent = translations[currentLanguage]['tag-fixtures'];
            document.querySelector('.tag-industrial').textContent = translations[currentLanguage]['tag-industrial'];
            document.querySelector('.tag-piping').textContent = translations[currentLanguage]['tag-piping'];
            document.querySelector('.software-title-text').textContent = translations[currentLanguage]['software-title'];
        }

        // ===================================================================
        // LANGUAGE TOGGLE
        // ===================================================================
        const languageToggle = document.getElementById('languageToggle');
        
        // Apply saved language on load
        if (currentLanguage === 'fr') {
            document.body.classList.add('lang-fr');
        }
        
        languageToggle.addEventListener('click', () => {
            document.body.classList.toggle('lang-fr');
            currentLanguage = document.body.classList.contains('lang-fr') ? 'fr' : 'en';
            localStorage.setItem('language', currentLanguage);
            translatePage();
        });

        // ===================================================================
        // DARK MODE TOGGLE
        // ===================================================================
        const themeToggle = document.getElementById('themeToggle');
        const savedTheme = localStorage.getItem('theme') || 'light';
        
        // Apply saved theme on load
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-mode');
        }
        
        // Save theme preference to localStorage
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            const currentTheme = document.body.classList.contains('dark-mode') ? 'dark' : 'light';
            localStorage.setItem('theme', currentTheme);
        });

        // ===================================================================
        // TAB SWITCHING
        // ===================================================================
        const navTabs = document.querySelectorAll('.nav-tab');
        const tabContents = document.querySelectorAll('.tab-content');

        navTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const targetTab = tab.getAttribute('data-tab');
                
                // Remove active class from all tabs and contents
                navTabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab
                tab.classList.add('active');
                
                // Show corresponding content
                const targetContent = document.querySelector(`[data-content="${targetTab}"]`);
                if (targetContent) {
                    targetContent.classList.add('active');
                }
            });
        });

        // ===================================================================
        // CONFIGURATION - ALL .step CHANGED TO .STEP (UPPERCASE)
        // ===================================================================
        const models = [
            {
                id: 1,
                title: "E1",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1).",
                thumbnail: "images/model1bis-thumb.png",
                images: ["images/E1-1.png", "images/E1-2.png"],
                stepFile: "models/E1.STEP"
            },
            {
                id: 2,
                title: "E2",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1).",
                thumbnail: "images/model2-thumb.png",
                images: ["images/E2-1.png", "images/E2-2.png", "images/E2-3.png"],
                stepFile: "models/E2.STEP"
            },
            {
                id: 3,
                title: "E3",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1).",
                thumbnail: "images/model3-thumb.png",
                images: ["images/E3-1.png", "images/E3-2.png"],
                stepFile: "models/E3.STEP"
            },
            {
                id: 4,
                title: "E4",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1), practiced secondary feature modeling.",
                thumbnail: "images/model4-thumb.png",
                images: ["images/E4-1.png", "images/E4-2.png"],
                stepFile: "models/E4.STEP"
            },
            {
                id: 5,
                title: "E7",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1), practiced projected curves and sweeping features.",
                thumbnail: "images/model5-thumb.png",
                images: ["images/E7-1.png", "images/E7-2.png", "images/E7-3.png"],
                stepFile: "models/E7.STEP"
            },
            {
                id: 6,
                title: "E8",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1), practiced lofting technique.",
                thumbnail: "images/model6-thumb.png",
                images: ["images/E8-1.png", "images/E8-2.png", "images/E8-3.png"],
                stepFile: "models/E8.STEP"
            },
            {
                id: 7,
                title: "E10",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1), practiced top-down assembly modeling.",
                thumbnail: "images/model7-thumb.png",
                images: ["images/E10-1.png", "images/E10-2.png", "images/E10_drawing.PNG"],
                stepFile: "models/E10.STEP"
            },
            {
                id: 8,
                title: "E11b",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1), used the sheet metal tool.",
                thumbnail: "images/model8-thumb.png",
                images: ["images/E11B.png", "images/E11B_from_Solidworks_basics_2024_by_Christopher_F.Sikora.png"],
                stepFile: "models/E11b.STEP"
            },
            {
                id: 9,
                title: "L3",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1), in this exercise I followed the instructions of the drawing attached.",
                thumbnail: "images/model9-thumb.png",
                images: ["images/L3-1.png", "images/L3-2.png", "images/L3_from_Solidworks_basics_2024_by_Christopher_F.Sikora.png"],
                stepFile: "models/L3.STEP"
            },
            {
                id: 10,
                title: "L3b",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1), in this exercise I followed the instructions of the drawing attached.",
                thumbnail: "images/model10-thumb.png",
                images: ["images/L3b-1.png", "images/L3b-2.png", "images/L3b_from_Solidworks_basics_2024_by_Christopher_F.Sikora.png"],
                stepFile: "models/L3b.STEP"
            },
            {
                id: 11,
                title: "Bottle",
                description: "Bottle",
                thumbnail: "images/bottle-thumb.png",
                images: ["images/Bottle-1.png", "images/Bottle-2.png"],
                stepFile: "models/Bottle.STEP"
            },
            {
                id: 12,
                title: "L4",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1), practiced pattern and mirror features.",
                thumbnail: "images/model12bis-thumb.png",
                images: ["images/L4-1.png", "images/L4-2.png", "images/L4-3.png", "images/L4-4.png", "images/L4-5.png", "images/L4_from_Solidworks_basics_2024_by_Christopher_F.Sikora.png"],
                stepFile: "models/L4.STEP"
            },
            {
                id: 13,
                title: "L6",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1), in this exercise I followed the instructions of the drawing attached.",
                thumbnail: "images/model13-thumb.png",
                images: ["images/L6-1.png", "images/L6-2.png", "images/L6_from_Solidworks_basics_2024_by_Christopher_F.Sikora.png"],
                stepFile: "models/L6.STEP"
            },
            {
                id: 14,
                title: "L7",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1), in this exercise I followed the instructions of the drawing attached.",
                thumbnail: "images/model14bis-thumb.png",
                images: ["images/L7-1.png", "images/L7-2.png", "images/L7-3.png", "images/L7-4.png", "images/L7_from_Solidworks_basics_2024_by_Christopher_F.Sikora.png"],
                stepFile: "models/L7.STEP"
            },
            {
                id: 15,
                title: "L8",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1), in this exercise I followed the instructions of the drawing attached.",
                thumbnail: "images/model15bis-thumb.png",
                images: ["images/L8-1.png", "images/L8_from_Solidworks_basics_2024_by_Christopher_F.Sikora.png"],
                stepFile: "models/L8.STEP"
            },
            {
                id: 16,
                title: "L10 turbine filter",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1), in this exercise I followed the instructions of the drawing attached.",
                thumbnail: "images/model16bis-thumb.png",
                images: ["images/L10-1.png", "images/L10-2.png", "images/L10-3.png", "images/L10_from_Solidworks_basics_2024_by_Christopher_F.Sikora.png"],
                stepFile: "models/L10.STEP"
            },
            {
                id: 17,
                title: "L11c and L11d",
                description: "Model made with the solidworks basics course by Christopher F. Sikora (Vertanux1), practiced assembly and drawing.",
                thumbnail: "images/model17bis-thumb.png",
                images: ["images/L11c-L11d-2.png", "images/L11c-L11d-1.png", "images/L11d-1.png", "images/L11c-1.png", "images/L11d-2.png", "images/L11d_timer_base_plan.PNG", "images/L11c_cover_plan.PNG"],
                stepFile: "models/L11c-L11d.STEP"
            },
            {
                id: 18,
                title: "sa700 smoke detector",
                description: "I decided to challenge myself and replicate a smoke detector",
                thumbnail: "images/model18-thumb.png",
                images: ["images/sa700-1.png", "images/sa700-2.png", "images/sa700-3.png", "images/sa700-4.png", "images/sa700-5.png", "images/sa700-6.png", "images/sa700-7.png", "images/sa700-8.png", "images/sa700-9.png", "images/sa700-10.png", "images/sa700-11.png", "images/sa700_plan.PNG", "images/sa700-references.png"],
                stepFile: "models/sa700.STEP"
            }
        ];

        // ===================================================================
        // GENERATE GALLERY (REVERSED ORDER - newest first)
        // ===================================================================
        const gallery = document.getElementById('gallery');

        // Reverse the array so L12 appears first, E1 appears last
        const reversedModels = [...models].reverse();

        reversedModels.forEach(model => {
            const item = document.createElement('div');
            item.className = 'gallery-item';
            item.innerHTML = `
                <img src="${model.thumbnail}" alt="${model.title}">
                <div class="item-info">
                    <div class="item-title">${model.title}</div>
                </div>
            `;
            
            item.addEventListener('click', async () => {
                // Clear Chili3D database before opening model to ensure theme works
                try {
                    const dbs = await indexedDB.databases();
                    const chiliDb = dbs.find(db => db.name === 'chili3d-db' || db.name.includes('chili'));
                    if (chiliDb) {
                        await indexedDB.deleteDatabase(chiliDb.name);
                        console.log('üóëÔ∏è Cleared Chili3D database for theme consistency');
                    }
                } catch (e) {
                    // Silent fail - not critical
                }
                
                // Store model data and navigate to detail page
                localStorage.setItem('selectedModel', JSON.stringify(model));
                window.location.href = 'model-detail.html';
            });
            
            gallery.appendChild(item);
        });

        // Translate page on load
        translatePage();

        // ===================================================================
        // CHILI3D THEME FIX - Clear preferences to ensure theme consistency
        // ===================================================================
        (function clearChili3DPreferences() {
            // Run once per page load
            const DB_NAME = 'chili3d-db';
            
            // Try method 1: Delete entire database
            const deleteRequest = indexedDB.deleteDatabase(DB_NAME);
            
            deleteRequest.onsuccess = function() {
                console.log('‚úÖ Cleared Chili3D preferences for theme consistency');
            };
            
            deleteRequest.onerror = function() {
                // If delete fails, try to clear just the preferences store
                const openRequest = indexedDB.open(DB_NAME);
                
                openRequest.onsuccess = function(event) {
                    const db = event.target.result;
                    
                    if (db.objectStoreNames.contains('preferences')) {
                        try {
                            const tx = db.transaction(['preferences'], 'readwrite');
                            const store = tx.objectStore('preferences');
                            store.clear();
                            console.log('‚úÖ Cleared Chili3D theme preferences');
                        } catch (e) {
                            // Silent fail
                        }
                    }
                    
                    db.close();
                };
            };
        })();
    </script>
</body>
</html>
